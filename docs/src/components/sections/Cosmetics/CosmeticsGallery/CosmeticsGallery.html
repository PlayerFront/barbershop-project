<!DOCTYPE html>

<html>
<head>
  <title>CosmeticsGallery.jsx</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="..\..\..\..\..\docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>CosmeticsGallery.jsx</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-1">&#x00a7;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Swiper</span>, <span class="hljs-title class_">SwiperSlide</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;swiper/react&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Navigation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;swiper/modules&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;swiper/css&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;swiper/css/navigation&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./_cosmetics-gallery.scss&#x27;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CarouselButton</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../../ui/CarouselButton/CarouselButton&#x27;</span>;
<span class="hljs-keyword">import</span> prevBtn <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../../../assets/icons/previous-button.svg&#x27;</span>;
<span class="hljs-keyword">import</span> nextBtn <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../../../assets/icons/next-button.svg&#x27;</span>;

<span class="hljs-comment">/**
 * CosmeticsGallery - responsive cosmetics products carousel component
 * 
 * Displays a brand cosmetics gallery with intelligent image loading.
 * Automatically serves optimized image sizes (400px, 800px, 1200px) based on device capabilities
 * using srcSet for maximum performance across all devices.
 * 
 * Key features:
 * - Automatic image size selection based on viewport
 * - Groups images by product and size for efficient loading
 * - Uses Vite&#x27;s import.meta.glob for optimized asset loading
 * - Integrates with Swiper for touch-friendly carousel
 * - Implements lazy loading for performance optimization
 * - Sorts images numerically by filename (brand-product-1.webp, etc.)
 * 
 * <span class="hljs-doctag">@component</span>
 * <span class="hljs-doctag">@example</span>
 * &lt;CosmeticsGallery /&gt;
 * 
 * File structure:
 * brand-product-1-400.webp    // mobile devices
 * brand-product-1-800.webp    // tablets
 * brand-product-1-1200.webp   // desktop
 */</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">CosmeticsGallery</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">const</span> cosmeticsImages = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-title function_">glob</span>(<span class="hljs-string">&#x27;../../../../assets/images/brands/brand-product-*.webp&#x27;</span>, {
        <span class="hljs-attr">eager</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">query</span>: <span class="hljs-string">&#x27;?url&#x27;</span>
    })).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">default</span>);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getImageGroups</span> = (<span class="hljs-params"></span>) =&gt; {
        <span class="hljs-keyword">const</span> groups = {};

        cosmeticsImages.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">path</span> =&gt;</span> {
            <span class="hljs-keyword">const</span> filename = path.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;/&#x27;</span>).<span class="hljs-title function_">pop</span>();
            <span class="hljs-keyword">const</span> parts = filename.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;-&#x27;</span>);

            <span class="hljs-keyword">if</span>(parts.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">4</span> &amp;&amp; parts[<span class="hljs-number">0</span>] === <span class="hljs-string">&#x27;brand&#x27;</span> &amp;&amp; parts[<span class="hljs-number">1</span>] === <span class="hljs-string">&#x27;product&#x27;</span>) {
                <span class="hljs-keyword">const</span> number = parts[<span class="hljs-number">2</span>];
                <span class="hljs-keyword">const</span> size = parts[<span class="hljs-number">3</span>].<span class="hljs-title function_">replace</span>(<span class="hljs-string">&#x27;.webp&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>);

                <span class="hljs-keyword">if</span> (!groups[number]) groups[number] = {};
                groups[number][size] = path;
            }
        });
 
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(groups)
            .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> <span class="hljs-built_in">parseInt</span>(a) - <span class="hljs-built_in">parseInt</span>(b))
            .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> groups[number]);
    }

    <span class="hljs-keyword">const</span> imageGroups = <span class="hljs-title function_">getImageGroups</span>();

    <span class="hljs-keyword">return</span> (
        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;cosmetics-gallery&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Swiper</span>
                <span class="hljs-attr">modules</span>=<span class="hljs-string">{[Navigation]}</span>
                <span class="hljs-attr">loop</span>=<span class="hljs-string">{true}</span>
                <span class="hljs-attr">spaceBetween</span>=<span class="hljs-string">{15}</span>
                <span class="hljs-attr">speed</span>=<span class="hljs-string">{400}</span>
                <span class="hljs-attr">navigation</span>=<span class="hljs-string">{{</span>
                    <span class="hljs-attr">nextEl:</span> &#x27;<span class="hljs-attr">.cosmetics-gallery__btn--next</span>&#x27;,
                    <span class="hljs-attr">prevEl:</span> &#x27;<span class="hljs-attr">.cosmetics-gallery__btn--prev</span>&#x27;,
                }}
                <span class="hljs-attr">breakpoints</span>=<span class="hljs-string">{{</span>
                    <span class="hljs-attr">320:</span> {
                        <span class="hljs-attr">slidesPerView:</span> <span class="hljs-attr">1</span>,
                    },
                    <span class="hljs-attr">768:</span> {
                        <span class="hljs-attr">slidesPerView:</span> <span class="hljs-attr">2</span>,
                    }
                }}
                <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;cosmetics-gallery__swiper&quot;</span>
            &gt;</span>

                {imageGroups.map((group, index) =&gt; {
                    const adaptiveSet = {
                        src: group[&#x27;800&#x27;], 
                        srcSet: `
                            ${group[&#x27;400&#x27;]} 400w,
                            ${group[&#x27;800&#x27;]} 800w,
                            ${group[&#x27;1200&#x27;]} 1200w
                        `,
                        sizes: `(max-width: 768px) 400px,
                                (max-width: 1200px) 800px,
                                1200px`
                    };

                    return (
                        <span class="hljs-tag">&lt;<span class="hljs-name">SwiperSlide</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
                                {<span class="hljs-attr">...adaptiveSet</span>}
                                <span class="hljs-attr">alt</span>=<span class="hljs-string">{</span>`Косметика ${<span class="hljs-attr">index</span> + <span class="hljs-attr">1</span>}`}
                                <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;cosmetics-gallery__image&quot;</span>
                                <span class="hljs-attr">loading</span>=<span class="hljs-string">&quot;lazy&quot;</span>
                            /&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">SwiperSlide</span>&gt;</span>
                    );
                })}
            <span class="hljs-tag">&lt;/<span class="hljs-name">Swiper</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">CarouselButton</span>
                <span class="hljs-attr">direction</span>=<span class="hljs-string">&quot;prev&quot;</span>
                <span class="hljs-attr">icon</span>=<span class="hljs-string">{prevBtn}</span>
                <span class="hljs-attr">ariaLabel</span>=<span class="hljs-string">&quot;Предыдущий слайд&quot;</span>
                <span class="hljs-attr">swiperTarget</span>=<span class="hljs-string">&quot;cosmetics-gallery__btn--prev&quot;</span>
            /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">CarouselButton</span>
                <span class="hljs-attr">direction</span>=<span class="hljs-string">&quot;next&quot;</span>
                <span class="hljs-attr">icon</span>=<span class="hljs-string">{nextBtn}</span>
                <span class="hljs-attr">ariaLabel</span>=<span class="hljs-string">&quot;Следующий слайд&quot;</span>
                <span class="hljs-attr">swiperTarget</span>=<span class="hljs-string">&quot;cosmetics-gallery__btn--next&quot;</span>
            /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CosmeticsGallery</span>;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
